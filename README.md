# rpcframework
 本项目主要是通过自己来实现rpc框架的调用，主要用到了zookeeper，反射原理，注解机制等实现，下面看下大概的实现方案。
## 1.服务端：
### 1.1.如何获取添加满足的调用接口类？
我们要指定一个需要扫描的package结构，在该package下面有我们实现了调用接口的类，我们通过类加载机制去获取这些class类以后，判断这些类是否实现了指定的注解，如果实现了说明就是我们需要的实现类。
### 1.2.如何往zookeeper中添加满足的调用接口类？
获取到满足条件的实现类以后，我们就可以往zookeeper注册了，注册的时候需要自己指定一个路径进行存储，存储的信息包括接口的名称、调用服务的地址、实现的解析协议，通过实现类上的注解，我们获取到注解的value值，该值是需要提供给客户端调用的接口类，同时也存储到zookeeper中，我们以这个接口类为map的key，实现类的实例为value，同时缓存到服务端上面。
### 1.3.客户端请求过来后如何进行调用？
当请求通过netty的调用方式从客户端访问过来后，我们需要将请求的数据进行解码操作，将数据取出来以后，根据请求的接口获取服务端缓存的实例对象，通过一系列的反射实现，成功调用后将返回值进行编码操作，通过netty进行返回操作。
通过以上步骤就大概完成了服务端的实现。
## 2.客户端：
### 2.1.如何获取zookeeper上注册的接口信息？
通过反射代理，我们定义一个远程的接口类，在反射代理中通过传入的接口类，在调用远程接口的方法时，通过反射的invoke()方法，我们可以到zookeeper上面去获取指定的类信息。
### 2.2.如何进行远程参数的传递？
在zookeeper上面获取到类信息后，判断我们需要调用的远程服务是否存在，存在的话则进行请求参数的组装，把组装后的数据编码后通过netty进行传输，需要注意的是完成一次netty传输后需要标明是否手动进行关闭这次的传输。
### 2.3.如何获取返回值?
进行远程调用完成后，服务端会进行值的返回，将返回值进行解码操作后，获取到具体的返回信息，invoke()方法就会把值返回给调用的客户端了。
